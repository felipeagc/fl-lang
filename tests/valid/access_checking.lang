import c "core:c";

typedef Struct2 struct {
    a: i32,
};

typedef Struct struct {
    array: [2]Struct2,
};


proc test() *Struct {
    return c.malloc(@sizeof(Struct));
}

proc "c" main() void {
    var func: proc* () *Struct = test;
    test().array[0].a = 123;
    func().array[0].a = 123;
    func()[0].array[0].a = 123;
}
